extends ../../_shared/page-layout
include ../../_mixins/bootstrap-form

block page-head
	link(rel = 'stylesheet', href = '/_npm/datatables.net-bs/css/dataTables.bootstrap.css')

block page-body

	mixin staticFormContent(name)
		case name
			when 'date-links'
				each linkSet in quickPeriodDates
					ul.inline-form-links.stacked
						each link in linkSet
							li: a.quick-period-link(href = '#', data-start = link[1], data-end = link[2])= link[0]

	div.row
		div.col-xs-12.col-md-6
			h2 Settings for New Budgets

			+bootstrapForm({
				action: '/settings/budgets/clone',
				method: 'post',
				rows: [
					{
						fields: [
							{
								type: 'date',
								name: 'startDate',
								label: 'Start',
								inputAttrs: {
									required: true
								}
							},
							{
								type: 'date',
								name: 'endDate',
								label: 'End',
								inputAttrs: {
									required: true
								}
							}
						]
					},
					{
						fields: [
							{
								type: 'static',
								label: 'Quick Periods',
								name: 'date-links',
								sizes: ['xs-12']
							}
						]
					},
					{
						fields: [
							{
								type: 'submit',
								label: 'Save',
								btnClasses: ['btn-success'],
								btnIcon: 'fa-save'
							}
						]
					}
				]
			})

		div.col-xs-12.col-md-6
			if (budgets.length === 1)
				h2 Budget to Clone
			else
				h2 Budgets to Clone

			table.table.table-hover.table-condensed
				thead
					tr
						th Category
						th Amount

				tbody
					each budget in budgets
						tr
							td= budget.category.name
							td!= locals.formatters.formatCurrency(budget.amount)

block page-scripts
	script(src = '/settings/budgets/bundle.js')
